{% style %}
.review-slider {
  text-align: center;
  padding: 20px;
  background-color: #f9f9f9;
}

.reviews {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.review-item {
  background-color: #fff;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.star-rating {
  display: inline-block;
}

.star {
  font-size: 20px;
  color: #d3d3d3;
}

.star.filled {
  color: inherit; /* Use the dynamic star color from settings */
}

.star-rating span {
  margin-right: 3px;
}

  {% endstyle %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
  var swiper = new Swiper('.reviews', {
    slidesPerView: 1,
    spaceBetween: 10,
    loop: true,
    autoplay: {
      delay: 5000,
    },
    breakpoints: {
      768: {
        slidesPerView: 2,
      },
      1024: {
        slidesPerView: 3,
      }
    }
  });
});

</script>
<div class="review-slider">
  <h2>{{ settings.review_title }}</h2>
  <div class="reviews">
    {% for i in (1..settings.review_count) %}
      <div class="review-item">
        <div class="review-content">
          {% assign review_content_key = "review_" | append: i | append: "_content" %}
          <p>{{ settings[review_content_key] }}</p>
        </div>
        <div class="star-rating">
          {% assign review_stars_key = "review_" | append: i | append: "_stars" %}
          {% assign rating = settings[review_stars_key] %}
          {% for star in (1..5) %}
            <span class="star{% if star <= rating %} filled{% endif %}" style="color: {{ settings.star_color }};">&#9733;</span>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>


{% schema %}
{
  "name": "Custom Review Slider",
  "settings": [
    {
      "type": "text",
      "label": "Review Title",
      "id": "review_title",
      "default": "Customer Reviews"
    },
    {
      "type": "text",
      "label": "Star Rating Color",
      "id": "star_color",
      "default": "#FFD700"
    },
    {
      "type": "range",
      "label": "Number of Reviews",
      "id": "review_count",
      "default": 3,
      "min": 1,
      "max": 10,
      "step": 1
    },
    {
      "type": "richtext",
      "label": "Review Content 1",
      "id": "review_1_content",
      "default": "<p>Great product!</p>"
    },
    {
      "type": "range",
      "label": "Star Rating for Review 1",
      "id": "review_1_stars",
      "default": 5,
      "min": 1,
      "max": 5,
      "step": 1
    },
    {
      "type": "richtext",
      "label": "Review Content 2",
      "id": "review_2_content",
      "default": "<p>I am satisfied with the purchase.</p>"
    },
    {
      "type": "range",
      "label": "Star Rating for Review 2",
      "id": "review_2_stars",
      "default": 4,
      "min": 1,
      "max": 5,
      "step": 1
    },
    {
      "type": "richtext",
      "label": "Review Content 3",
      "id": "review_3_content",
      "default": "<p>Could be better, but good overall.</p>"
    },
    {
      "type": "range",
      "label": "Star Rating for Review 3",
      "id": "review_3_stars",
      "default": 3,
      "min": 1,
      "max": 5,
      "step": 1
    }
  ],
  "presets": [
    {
      "name": "Default",
      "category": "Custom"
    }
  ]
}
{% endschema %}
