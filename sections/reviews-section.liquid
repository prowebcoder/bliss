<style>
  /* General Review Section */
  .review-section {
    padding: 30px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .review-title {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    text-align: center;
    margin-bottom: 20px;
  }

  /* Grid Layout for Reviews (4 Columns in One Row) */
  .reviews-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 equal columns */
    gap: 20px;
    margin-top: 20px;
  }

  @media screen and (max-width: 1024px) {
    .reviews-container {
      grid-template-columns: repeat(2, 1fr); /* 2 columns on tablets */
    }
  }

  @media screen and (max-width: 768px) {
    .reviews-container {
      grid-template-columns: 1fr; /* 1 column on mobile */
    }
  }

  /* Review Block */
  .review {
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    transition: transform 0.3s ease;
  }

  .review:hover {
    transform: translateY(-5px);
  }

  /* Circle Image */
  .circle-image {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
  }

  /* Review Text (Quote) */
  .review-text {
    font-style: italic;
    color: #555;
    margin-bottom: 15px;
    font-size: 16px;
  }

  /* Author Name */
  .review-author {
    font-weight: bold;
    color: #333;
    margin-bottom: 10px;
  }

  /* Trustpilot Rating */
  .trustpilot-rating {
    display: inline-block;
    font-size: 18px;
  }

  .trustpilot-rating .filled {
    color: {{ section.settings.star_color }}; /* Dynamic star color from settings */
  }

  .trustpilot-rating .empty {
    color: #ccc;
  }

  /* Custom Styling for Empty Reviews */
  .review.no-reviews {
    background-color: #e0e0e0;
    text-align: center;
    font-size: 18px;
    padding: 20px;
    border-radius: 8px;
  }

  /* Responsive Styling */
  @media screen and (max-width: 768px) {
    .review {
      padding: 15px;
    }
  }
</style>

<div class="review-section">
  <h2 class="review-title">{{ section.settings.default_review_title }}</h2>

  <div class="reviews-container {% if settings.review_display_style == 'grid' %}review-grid{% else %}review-list{% endif %}">
    {% assign column_class = '' %}

    {% if settings.columns_per_row == '2' %}
      {% assign column_class = 'col-2' %}
    {% elsif settings.columns_per_row == '3' %}
      {% assign column_class = 'col-3' %}
    {% else %}
      {% assign column_class = 'col-1' %}
    {% endif %}

    {% for block in section.blocks %}
      <div class="review {{ column_class }}">
        <!-- Circle Image -->
        {% if block.settings.image %}
          <div class="review-image">
            <img src="{{ block.settings.image | img_url: 'medium' }}" alt="Review Image" class="circle-image" />
          </div>
        {% endif %}

        <!-- Review Text/Quote -->
        <p class="review-text">"{{ block.settings.quote_text }}"</p>

        <!-- Author Name -->
        <p class="review-author"><strong>{{ block.settings.author_name }}</strong></p>

        <!-- Trustpilot Rating (Example: 5 stars) -->
        {% if block.settings.trustpilot_rating %}
          <div class="trustpilot-rating">
            {% for i in (1..5) %}
              <span class="{% if i <= block.settings.trustpilot_rating %}filled{% else %}empty{% endif %}">â˜…</span>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    {% else %}
      <p class="no-reviews">No reviews yet.</p>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Customer Reviews Section",
  "settings": [
    {
      "type": "header",
      "content": "Product Reviews Settings"
    },
    {
      "type": "textarea",
      "label": "Default Review Title",
      "id": "default_review_title",
      "default": "Customer Reviews",
      "info": "Set the default review title that will appear in the section."
    },
    {
      "type": "color",
      "label": "Star Rating Color",
      "id": "star_color",
      "default": "#ffcc00",
      "info": "Set the color of the star ratings."
    },
    {
      "type": "select",
      "label": "Reviews Display Style",
      "id": "review_display_style",
      "default": "list",
      "options": [
        {
          "value": "list",
          "label": "List"
        },
        {
          "value": "grid",
          "label": "Grid"
        }
      ]
    },
    {
      "type": "select",
      "label": "Columns per Row",
      "id": "columns_per_row",
      "default": "2",
      "options": [
        {
          "value": "1",
          "label": "1 Column"
        },
        {
          "value": "2",
          "label": "2 Columns"
        },
        {
          "value": "3",
          "label": "3 Columns"
        }
      ]
    }
  ],
  "blocks": [
    {
      "type": "review_block",
      "name": "Review Block",
      "settings": [
        {
          "type": "image_picker",
          "label": "Customer Image",
          "id": "image",
          "info": "Upload a circle-shaped image of the reviewer."
        },
        {
          "type": "textarea",
          "label": "Quote or Review Text",
          "id": "quote_text",
          "default": "Great product, would buy again!",
          "info": "Enter the text for the customer's review or quote."
        },
        {
          "type": "text",
          "label": "Author Name",
          "id": "author_name",
          "default": "John Doe",
          "info": "Enter the name of the customer who left the review."
        },
        {
          "type": "range",
          "label": "Trustpilot Rating (1-5 Stars)",
          "id": "trustpilot_rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5,
          "info": "Set the Trustpilot star rating for this review."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Customer Reviews Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
